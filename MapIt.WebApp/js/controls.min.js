(function(){L.LayerJSON=L.FeatureGroup.extend({includes:L.Mixin.Events,options:{url:"",jsonpParam:null,callData:null,filterData:null,propertyItems:"",propertyTitle:"title",propertyLoc:"loc",propertyId:"id",locAsGeoJSON:!1,layerTarget:null,dataToMarker:null,onEachMarker:null,buildPopup:null,optsPopup:null,buildIcon:null,minZoom:10,caching:!0,minShift:1e3,updateOutBounds:!0,precision:6,attribution:""},initialize:function(n){L.FeatureGroup.prototype.initialize.call(this,[]);L.Util.setOptions(this,n);this._dataToMarker=this.options.dataToMarker||this._defaultDataToMarker;this._buildIcon=this.options.buildIcon||this._defaultBuildIcon;this._filterData=this.options.filterData||null;this._hashUrl=this.options.url;this._hashUrl?(this._callData=this.getAjax,this.options.jsonpParam&&(this._hashUrl+="&"+this.options.jsonpParam+"=",this._callData=this.getJsonp)):this._callData=this.options.callData;this._curReq=null;this._center=null;this._maxBounds=null;this._markersCache={}},onAdd:function(n){L.FeatureGroup.prototype.onAdd.call(this,n);this._center=n.getCenter();this._maxBounds=n.getBounds();n.on("moveend zoomend",this._onMove,this);this.update()},onRemove:function(n){n.off("moveend zoomend",this._onMove,this);L.FeatureGroup.prototype.onRemove.call(this,n);for(var t in this._layers)this._layers.hasOwnProperty(t)&&L.FeatureGroup.prototype.removeLayer.call(this,this._layers[t])},getAttribution:function(){return this.options.attribution},addLayer:function(n){return this.options.layerTarget?(this.options.layerTarget.addLayer.call(this.options.layerTarget,n),this.fire("layeradd",{layer:n})):(L.FeatureGroup.prototype.addLayer.call(this,n),this)},removeLayer:function(n){return this.options.layerTarget?(this.options.layerTarget.removeLayer.call(this.options.layerTarget,n),this.fire("layerremove",{layer:n})):(L.FeatureGroup.prototype.removeLayer.call(this,n),this)},clearLayers:function(){return this._markersCache={},this.options.layerTarget?this.options.layerTarget.clearLayers.call(this.options.layerTarget):L.FeatureGroup.prototype.clearLayers.call(this),this},_debouncer:function(n,t){var i;return t=t||300,function(){var r=this,u=arguments;clearTimeout(i);i=setTimeout(function(){n.apply(r,Array.prototype.slice.call(u))},t)}},_getPath:function(n,t){var i=t.split("."),e=i.pop(),r=i.length,u=i[0],f=1;if(r>0)while((n=n[u])&&f<r)u=i[f++];if(n)return n[e]},_defaultBuildIcon:function(){return new L.Icon.Default},_defaultDataToMarker:function(n,t){var r=this._getPath(n,this.options.propertyTitle),f=L.Util.extend({icon:this._buildIcon(n,r),title:r},n),i=new L.Marker(t,f),u=null;return this.options.buildPopup&&(u=this.options.buildPopup(n,i))&&i.bindPopup(u,this.options.optsPopup),i},addMarker:function(n){var t,i,r=this.options.propertyLoc,u;if(L.Util.isArray(r)?t=L.latLng(parseFloat(this._getPath(n,r[0])),parseFloat(this._getPath(n,r[1]))):this.options.locAsGeoJSON?(u=this._getPath(n,r),t=L.latLng(u[1],u[0])):t=L.latLng(this._getPath(n,r)),i=this.options.propertyId?this._getPath(n,this.options.propertyId):t.lat+""+t.lng+""+this._getPath(n,this.options.propertyTitle),typeof this._markersCache[i]=="undefined"&&(this._markersCache[i]=this._dataToMarker(n,t)),this.options.onEachMarker)this.options.onEachMarker(n,this._markersCache[i]);this._markersCache[i]&&this.addLayer(this._markersCache[i])},_contains:function(n,t){var i;return t.getLatLng?i=t.getLatLng():t.getBounds&&(i=t.getBounds()),n.contains(i)},_markersCacheToLayer:function(n){for(var t in this._markersCache)this._markersCache[t]&&(this._contains(n,this._markersCache[t])?this.addLayer(this._markersCache[t]):this.removeLayer(this._markersCache[t]))},_onMove:function(){var i=this._map.getZoom(),t=this._map.getCenter(),n=this._map.getBounds();if(i<this.options.minZoom)return!1;if(this.options.caching){if(this.options.minShift&&this._center.distanceTo(t)<this.options.minShift)return!1;if(this._center=t,this.options.updateOutBounds&&this._maxBounds.contains(n))return this._markersCacheToLayer(n),!1;this._maxBounds.extend(n)}else this.clearLayers();this.update()},update:function(){var i=this.options.precision,r=this._map.getBounds(),u=r.getSouthWest(),f=r.getNorthEast(),t=[[parseFloat(u.lat.toFixed(i)),parseFloat(u.lng.toFixed(i))],[parseFloat(f.lat.toFixed(i)),parseFloat(f.lng.toFixed(i))]],n;this._hashUrl&&(t=L.Util.template(this._hashUrl,{lat1:t[0][0],lon1:t[0][1],lat2:t[1][0],lon2:t[1][1]}));this._curReq&&this._curReq.abort&&this._curReq.abort();n=this;n.fire("dataloading",{req:t});this._curReq=this._callData(t,function(t){n._curReq=null;n._filterData&&(t=n._filterData(t));n.options.propertyItems&&(t=n._getPath(t,n.options.propertyItems));n.fire("dataloaded",{data:t});for(var i in t)!isNaN(parseFloat(i))&&isFinite(i)&&n.addMarker.call(n,t[i])})},getAjax:function(n,t){window.XMLHttpRequest===undefined&&(window.XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP.6.0")}catch(n){try{return new ActiveXObject("Microsoft.XMLHTTP.3.0")}catch(t){throw new Error("XMLHttpRequest is not supported");}}});var i=new XMLHttpRequest;return i.open("GET",n),i.onreadystatechange=function(){var n={};if(i.readyState===4&&i.status===200){try{n=window.JSON?JSON.parse(i.responseText):eval("("+i.responseText+")")}catch(r){n={};throw new Error("Ajax response is not JSON");}t(n)}},i.send(),i},getJsonp:function(n,t){var r=document.getElementsByTagName("body")[0],i=L.DomUtil.create("script","leaflet-layerjson-jsonp",r);return L.LayerJSON.callJsonp=function(n){t(n);r.removeChild(i)},i.type="text/javascript",i.src=n+"L.LayerJSON.callJsonp",{abort:function(){i.parentNode.removeChild(i)}}}});L.layerJSON=function(n){return new L.LayerJSON(n)}}).call(this);L.Control.Layers=L.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(n,t,i){L.setOptions(this,i);this._layers={};this._lastZIndex=0;this._handlingClick=!1;for(var r in n)n.hasOwnProperty(r)&&this._addLayer(n[r],r);for(r in t)t.hasOwnProperty(r)&&this._addLayer(t[r],r,!0)},onAdd:function(n){this._initLayout();this._update();n.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this);return this._container},onRemove:function(n){n.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(n,t){return this._addLayer(n,t),this._update(),this},addOverlay:function(n,t){return this._addLayer(n,t,!0),this._update(),this},removeLayer:function(n){var t=L.stamp(n);return delete this._layers[t],this._update(),this},_initLayout:function(){var i="leaflet-control-layers",n=this._container=L.DomUtil.create("div",i),r,t;if(L.Browser.touch)L.DomEvent.on(n,"click",L.DomEvent.stopPropagation);else{L.DomEvent.disableClickPropagation(n);L.DomEvent.on(n,"mousewheel",L.DomEvent.stopPropagation)}if(r=this._form=L.DomUtil.create("form",i+"-list"),this.options.collapsed){L.DomEvent.on(n,"click",this._expand,this).on(n,"mouseleave",this._collapse,this);if(t=this._layersLink=L.DomUtil.create("a",i+"-toggle",n),t.href="#",t.title="Layers",L.Browser.touch)L.DomEvent.on(t,"click",L.DomEvent.stopPropagation).on(t,"click",L.DomEvent.preventDefault).on(t,"click",this._expand,this);else L.DomEvent.on(t,"focus",this._expand,this);this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=L.DomUtil.create("div",i+"-base",r);this._separator=L.DomUtil.create("div",i+"-separator",r);this._overlaysList=L.DomUtil.create("div",i+"-overlays",r);n.appendChild(r)},_addLayer:function(n,t,i){var r=L.stamp(n);this._layers[r]={layer:n,name:t,overlay:i};this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex))},_update:function(){var n,t,r,i;if(this._container){this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";n=!1;t=!1;for(r in this._layers)this._layers.hasOwnProperty(r)&&(i=this._layers[r],this._addItem(i),t=t||i.overlay,n=n||!i.overlay);this._separator.style.display=t&&n?"":"none"}},_onLayerChange:function(n){var t=L.stamp(n.layer);this._layers[t]&&!this._handlingClick&&this._update()},_createRadioElement:function(n,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"',r;return t&&(i+=' checked="checked"'),i+="/>",r=document.createElement("div"),r.innerHTML=i,r.firstChild},_addItem:function(n){var i=document.createElement("label"),t,u=this._map.hasLayer(n.layer),r,f;n.overlay?(t=document.createElement("input"),t.type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=u):t=this._createRadioElement("leaflet-base-layers",u);t.layerId=L.stamp(n.layer);L.DomEvent.on(t,"click",this._onInputClick,this);return r=document.createElement("span"),r.innerHTML=" "+n.name,i.appendChild(t),i.appendChild(r),f=n.overlay?this._overlaysList:this._baseLayersList,f.appendChild(i),i},_onInputClick:function(){var t,i,n,u=this._form.getElementsByTagName("input"),f=u.length,r;for(this._handlingClick=!0,t=0;t<f;t++)i=u[t],n=this._layers[i.layerId],i.checked&&!this._map.hasLayer(n.layer)?(this._map.addLayer(n.layer),n.overlay||(r=n.layer)):!i.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);r&&(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:r}));this._handlingClick=!1},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}});L.control.layers=function(n,t,i){return new L.Control.Layers(n,t,i)},function(){function t(t){t.Control.Loading=t.Control.extend({options:{delayIndicator:null,position:"topleft",separate:!1,zoomControl:null,spinjs:!1,spin:{lines:7,length:3,width:3,radius:5,rotate:13,top:"83%"}},initialize:function(n){t.setOptions(this,n);this._dataLoaders={};this.options.zoomControl!==null&&(this.zoomControl=this.options.zoomControl)},onAdd:function(i){if(this.options.spinjs&&typeof Spinner!="function")return n.error("Leaflet.loading cannot load because you didn't load spin.js (http://fgnass.github.io/spin.js/), even though you set it in options.");this._addLayerListeners(i);this._addMapListeners(i);this.options.separate||this.zoomControl||(i.zoomControl?this.zoomControl=i.zoomControl:i.zoomsliderControl&&(this.zoomControl=i.zoomsliderControl));var u="leaflet-control-loading",r;return this.zoomControl&&!this.options.separate?(r=this.zoomControl._container,u+=" leaflet-bar-part-bottom leaflet-bar-part last",t.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom")):r=t.DomUtil.create("div","leaflet-control-zoom leaflet-control-layer-container leaflet-bar"),this._indicatorContainer=r,this._indicator=t.DomUtil.create("a",u,r),this.options.spinjs&&(this._spinner=new Spinner(this.options.spin).spin(),this._indicator.appendChild(this._spinner.el)),r},onRemove:function(n){this._removeLayerListeners(n);this._removeMapListeners(n)},removeFrom:function(n){if(this.zoomControl&&!this.options.separate){this._container.removeChild(this._indicator);this._map=null;this.onRemove(n);return this}return t.Control.prototype.removeFrom.call(this,n)},addLoader:function(n){if(this._dataLoaders[n]=!0,this.options.delayIndicator&&!this.delayIndicatorTimeout){var t=this;this.delayIndicatorTimeout=setTimeout(function(){t.updateIndicator();t.delayIndicatorTimeout=null},this.options.delayIndicator)}else this.updateIndicator()},removeLoader:function(n){delete this._dataLoaders[n];this.updateIndicator();this.options.delayIndicator&&this.delayIndicatorTimeout&&!this.isLoading()&&(clearTimeout(this.delayIndicatorTimeout),this.delayIndicatorTimeout=null)},updateIndicator:function(){this.isLoading()?this._showIndicator():this._hideIndicator()},isLoading:function(){return this._countLoaders()>0},_countLoaders:function(){var n=0;for(var t in this._dataLoaders)this._dataLoaders.hasOwnProperty(t)&&n++;return n},_showIndicator:function(){t.DomUtil.addClass(this._indicator,"is-loading");t.DomUtil.addClass(this._indicatorContainer,"is-loading");this.options.separate||(this.zoomControl instanceof t.Control.Zoom?t.DomUtil.removeClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):typeof t.Control.Zoomslider=="function"&&this.zoomControl instanceof t.Control.Zoomslider&&t.DomUtil.removeClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_hideIndicator:function(){t.DomUtil.removeClass(this._indicator,"is-loading");t.DomUtil.removeClass(this._indicatorContainer,"is-loading");this.options.separate||(this.zoomControl instanceof t.Control.Zoom?t.DomUtil.addClass(this._getLastControlButton(),"leaflet-bar-part-bottom"):typeof t.Control.Zoomslider=="function"&&this.zoomControl instanceof t.Control.Zoomslider&&t.DomUtil.addClass(this.zoomControl._ui.zoomOut,"leaflet-bar-part-bottom"))},_getLastControlButton:function(){for(var i=this.zoomControl._container,n=i.children.length-1,t;n>0;){if(t=i.children[n],!(this._indicator===t||t.offsetWidth===0||t.offsetHeight===0))break;n--}return i.children[n]},_handleLoading:function(n){this.addLoader(this.getEventId(n))},_handleBaseLayerChange:function(n){var i=this;n.layer&&n.layer.eachLayer&&typeof n.layer.eachLayer=="function"?n.layer.eachLayer(function(n){i._handleBaseLayerChange({layer:n})}):t.TileLayer.Canvas&&n.layer instanceof t.TileLayer.Canvas||i._handleLoading(n)},_handleLoad:function(n){this.removeLoader(this.getEventId(n))},getEventId:function(n){return n.id?n.id:n.layer?n.layer._leaflet_id:n.target._leaflet_id},_layerAdd:function(t){if(t.layer&&t.layer.on)try{t.layer.on({loading:this._handleLoading,load:this._handleLoad},this)}catch(i){n.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",t.layer);n.warn("L.Control.Loading: Full details",i)}},_layerRemove:function(t){if(t.layer&&t.layer.off)try{t.layer.off({loading:this._handleLoading,load:this._handleLoad},this)}catch(i){n.warn("L.Control.Loading: Tried and failed to remove event handlers from layer",t.layer);n.warn("L.Control.Loading: Full details",i)}},_addLayerListeners:function(n){n.eachLayer(function(n){if(n.on)n.on({loading:this._handleLoading,load:this._handleLoad},this)},this);n.on("layeradd",this._layerAdd,this);n.on("layerremove",this._layerRemove,this)},_removeLayerListeners:function(n){n.eachLayer(function(n){n.off&&n.off({loading:this._handleLoading,load:this._handleLoad},this)},this);n.off("layeradd",this._layerAdd,this);n.off("layerremove",this._layerRemove,this)},_addMapListeners:function(n){n.on({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)},_removeMapListeners:function(n){n.off({baselayerchange:this._handleBaseLayerChange,dataloading:this._handleLoading,dataload:this._handleLoad,layerremove:this._handleLoad},this)}});t.Map.addInitHook(function(){this.options.loadingControl&&(this.loadingControl=new t.Control.Loading,this.addControl(this.loadingControl))});t.Control.loading=function(n){return new t.Control.Loading(n)}}var n=window.console||{error:function(){},warn:function(){}};typeof define=="function"&&define.amd?define(["leaflet"],function(n){t(n)}):t(L)}(),function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.leafletControlGeocoder=n()}}(function(){return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("./geocoders/nominatim")["class"];t.exports={"class":r.Control.extend({options:{showResultIcons:!1,collapsed:!0,expand:"click",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0},includes:r.Mixin.Events,initialize:function(n){r.Util.setOptions(this,n);this.options.geocoder||(this.options.geocoder=new u);this._requestCount=0},onAdd:function(n){var u="leaflet-control-geocoder",t=r.DomUtil.create("div",u+" leaflet-bar"),i=r.DomUtil.create("button",u+"-icon",t),e=this._form=r.DomUtil.create("div",u+"-form",t),f;if(this._map=n,this._container=t,i.innerHTML="&nbsp;",i.type="button",f=this._input=r.DomUtil.create("input","",e),f.type="text",f.placeholder=this.options.placeholder,this._errorElement=r.DomUtil.create("div",u+"-form-no-error",t),this._errorElement.innerHTML=this.options.errorMessage,this._alts=r.DomUtil.create("ul",u+"-alternatives leaflet-control-geocoder-alternatives-minimized",t),r.DomEvent.disableClickPropagation(this._alts),r.DomEvent.addListener(f,"keydown",this._keydown,this),r.DomEvent.addListener(f,"blur",function(){this.options.collapsed&&!this._preventBlurCollapse&&this._collapse();this._preventBlurCollapse=!1},this),this.options.collapsed)if(this.options.expand==="click")r.DomEvent.addListener(i,"click",function(n){n.button===0&&n.detail!==2&&this._toggle()},this);else{r.DomEvent.addListener(i,"mouseover",this._expand,this);r.DomEvent.addListener(i,"mouseout",this._collapse,this);this._map.on("movestart",this._collapse,this)}else r.DomEvent.addListener(i,"click",function(n){this._geocode(n)},this),this._expand();if(this.options.defaultMarkGeocode)this.on("markgeocode",this.markGeocode,this);this.on("startgeocode",function(){r.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")},this);this.on("finishgeocode",function(){r.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")},this);return r.DomEvent.disableClickPropagation(t),t},_geocodeResult:function(n,t){if(t||n.length!==1)if(n.length>0){this._alts.innerHTML="";this._results=n;r.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");for(var i=0;i<n.length;i++)this._alts.appendChild(this._createAlt(n[i],i))}else r.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error");else this._geocodeResultSelected(n[0])},markGeocode:function(n){return n=n.geocode||n,this._map.fitBounds(n.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new r.Marker(n.center).bindPopup(n.html||n.name).addTo(this._map).openPopup(),this},_geocode:function(n){var i=++this._requestCount,t=n?"suggest":"geocode";this._lastGeocode=this._input.value;n||this._clearResults();this.fire("start"+t);this.options.geocoder[t](this._input.value,function(r){i===this._requestCount&&(this.fire("finish"+t),this._geocodeResult(r,n))},this)},_geocodeResultSelected:function(n){this.options.collapsed||this._clearResults();this.fire("markgeocode",{geocode:n})},_toggle:function(){this._container.className.indexOf("leaflet-control-geocoder-expanded")>=0?this._collapse():this._expand()},_expand:function(){r.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded");this._input.select();this.fire("expand")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded","");r.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");r.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error");this.fire("collapse")},_clearResults:function(){r.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");this._selection=null;r.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_createAlt:function(n,t){var i=r.DomUtil.create("li",""),u=r.DomUtil.create("a","",i),f=this.options.showResultIcons&&n.icon?r.DomUtil.create("img","",u):null,e=n.html?undefined:document.createTextNode(n.name),o=function(t){this._preventBlurCollapse=!0;r.DomEvent.stop(t);this._geocodeResultSelected(n);r.DomEvent.on(i,"click",function(){this.options.collapsed&&this._collapse()},this)};return f&&(f.src=n.icon),i.setAttribute("data-result-index",t),n.html?u.innerHTML=u.innerHTML+n.html:u.appendChild(e),r.DomEvent.addListener(i,"mousedown",o,this),i},_keydown:function(n){var t=this,u=function(n){t._selection&&(r.DomUtil.removeClass(t._selection,"leaflet-control-geocoder-selected"),t._selection=t._selection[n>0?"nextSibling":"previousSibling"]);t._selection||(t._selection=t._alts[n>0?"firstChild":"lastChild"]);t._selection&&r.DomUtil.addClass(t._selection,"leaflet-control-geocoder-selected")},f,i;switch(n.keyCode){case 27:this.options.collapsed&&this._collapse();break;case 38:u(-1);r.DomEvent.preventDefault(n);break;case 40:u(1);r.DomEvent.preventDefault(n);break;case 13:this._selection?(f=parseInt(this._selection.getAttribute("data-result-index"),10),this._geocodeResultSelected(this._results[f]),this._clearResults()):this._geocode();r.DomEvent.preventDefault(n);break;default:i=this._input.value;this.options.geocoder.suggest&&i!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),i.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(r.bind(function(){this._geocode(!0)},this),this.options.suggestTimeout):this._clearResults())}}}),factory:function(n){return new r.Control.Geocoder(n)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./geocoders/nominatim":9}],2:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{service_url:"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"},initialize:function(n,t){r.setOptions(this,t);this._accessToken=n},geocode:function(n,t,i){var f={SingleLine:n,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"};this._key&&this._key.length&&(f.token=this._key);u.getJSON(this.options.service_url+"/findAddressCandidates",f,function(n){var e=[],u,o,s,f;if(n.candidates&&n.candidates.length)for(f=0;f<=n.candidates.length-1;f++)u=n.candidates[f],o=r.latLng(u.location.y,u.location.x),s=r.latLngBounds(r.latLng(u.extent.ymax,u.extent.xmax),r.latLng(u.extent.ymin,u.extent.xmin)),e[f]={name:u.address,bbox:s,center:o};t.call(i,e)})},suggest:function(n,t,i){return this.geocode(n,t,i)},reverse:function(n,t,i,f){var e={location:encodeURIComponent(n.lng)+","+encodeURIComponent(n.lat),distance:100,f:"json"};u.getJSON(this.options.service_url+"/reverseGeocode",e,function(n){var u=[],t;n&&!n.error&&(t=r.latLng(n.location.y,n.location.x),u.push({name:n.address.Match_addr,center:t,bounds:r.latLngBounds(t,t)}));i.call(f,u)})}}),factory:function(n,t){return new r.Control.Geocoder.ArcGis(n,t)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],3:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({initialize:function(n){this.key=n},geocode:function(n,t,i){u.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{query:n,key:this.key},function(n){var o=[],u,e,f;if(n.resourceSets.length>0)for(u=n.resourceSets[0].resources.length-1;u>=0;u--)e=n.resourceSets[0].resources[u],f=e.bbox,o[u]={name:e.name,bbox:r.latLngBounds([f[0],f[1]],[f[2],f[3]]),center:r.latLng(e.point.coordinates)};t.call(i,o)},this,"jsonp")},reverse:function(n,t,i,f){u.jsonp("//dev.virtualearth.net/REST/v1/Locations/"+n.lat+","+n.lng,{key:this.key},function(n){for(var e,t,o=[],u=n.resourceSets[0].resources.length-1;u>=0;u--)e=n.resourceSets[0].resources[u],t=e.bbox,o[u]={name:e.name,bbox:r.latLngBounds([t[0],t[1]],[t[2],t[3]]),center:r.latLng(e.point.coordinates)};i.call(f,o)},this,"jsonp")}}),factory:function(n){return new r.Control.Geocoder.Bing(n)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],4:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(n,t){this._key=n;r.setOptions(this,t);this.options.serviceUrl=this.options.service_url||this.options.serviceUrl},geocode:function(n,t,i){var f={address:n};this._key&&this._key.length&&(f.key=this._key);f=r.Util.extend(f,this.options.geocodingQueryParams);u.getJSON(this.options.serviceUrl,f,function(n){var e=[],u,o,s,f;if(n.results&&n.results.length)for(f=0;f<=n.results.length-1;f++)u=n.results[f],o=r.latLng(u.geometry.location),s=r.latLngBounds(r.latLng(u.geometry.viewport.northeast),r.latLng(u.geometry.viewport.southwest)),e[f]={name:u.formatted_address,bbox:s,center:o,properties:u.address_components};t.call(i,e)})},reverse:function(n,t,i,f){var e={latlng:encodeURIComponent(n.lat)+","+encodeURIComponent(n.lng)};e=r.Util.extend(e,this.options.reverseQueryParams);this._key&&this._key.length&&(e.key=this._key);u.getJSON(this.options.serviceUrl,e,function(n){var e=[],t,o,s,u;if(n.results&&n.results.length)for(u=0;u<=n.results.length-1;u++)t=n.results[u],o=r.latLng(t.geometry.location),s=r.latLngBounds(r.latLng(t.geometry.viewport.northeast),r.latLng(t.geometry.viewport.southwest)),e[u]={name:t.formatted_address,bbox:s,center:o,properties:t.address_components};i.call(f,e)})}}),factory:function(n,t){return new r.Control.Geocoder.Google(n,t)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],5:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{geocodeUrl:"http://geocoder.api.here.com/6.2/geocode.json",reverseGeocodeUrl:"http://reverse.geocoder.api.here.com/6.2/reversegeocode.json",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(n){r.setOptions(this,n)},geocode:function(n,t,i){var u={searchtext:n,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1};u=r.Util.extend(u,this.options.geocodingQueryParams);this.getJSON(this.options.geocodeUrl,u,t,i)},reverse:function(n,t,i,u){var f={prox:encodeURIComponent(n.lat)+","+encodeURIComponent(n.lng),mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1};f=r.Util.extend(f,this.options.reverseQueryParams);this.getJSON(this.options.reverseGeocodeUrl,f,i,u)},getJSON:function(n,t,i,f){u.getJSON(n,t,function(n){var e=[],t,o,s,u;if(n.response.view&&n.response.view.length)for(u=0;u<=n.response.view[0].result.length-1;u++)t=n.response.view[0].result[u].location,o=r.latLng(t.displayPosition.latitude,t.displayPosition.longitude),s=r.latLngBounds(r.latLng(t.mapView.topLeft.latitude,t.mapView.topLeft.longitude),r.latLng(t.mapView.bottomRight.latitude,t.mapView.bottomRight.longitude)),e[u]={name:t.address.label,bbox:s,center:o};i.call(f,e)})}}),factory:function(n){return new r.Control.Geocoder.HERE(n)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],6:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{serviceUrl:"https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/"},initialize:function(n,t){r.setOptions(this,t);this._accessToken=n},geocode:function(n,t,i){u.getJSON(this.options.serviceUrl+encodeURIComponent(n)+".json",{access_token:this._accessToken},function(n){var o=[],u,e,s,f;if(n.features&&n.features.length)for(f=0;f<=n.features.length-1;f++)u=n.features[f],e=r.latLng(u.center.reverse()),s=u.hasOwnProperty("bbox")?r.latLngBounds(r.latLng(u.bbox.slice(0,2).reverse()),r.latLng(u.bbox.slice(2,4).reverse())):r.latLngBounds(e,e),o[f]={name:u.place_name,bbox:s,center:e};t.call(i,o)})},suggest:function(n,t,i){return this.geocode(n,t,i)},reverse:function(n,t,i,f){u.getJSON(this.options.serviceUrl+encodeURIComponent(n.lng)+","+encodeURIComponent(n.lat)+".json",{access_token:this._accessToken},function(n){var o=[],t,e,s,u;if(n.features&&n.features.length)for(u=0;u<=n.features.length-1;u++)t=n.features[u],e=r.latLng(t.center.reverse()),s=t.hasOwnProperty("bbox")?r.latLngBounds(r.latLng(t.bbox.slice(0,2).reverse()),r.latLng(t.bbox.slice(2,4).reverse())):r.latLngBounds(e,e),o[u]={name:t.place_name,bbox:s,center:e};i.call(f,o)})}}),factory:function(n,t){return new r.Control.Geocoder.Mapbox(n,t)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],7:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"},initialize:function(n,t){this._key=decodeURIComponent(n);r.Util.setOptions(this,t)},_formatName:function(){for(var t=[],n=0;n<arguments.length;n++)arguments[n]&&t.push(arguments[n]);return t.join(", ")},geocode:function(n,t,i){u.jsonp(this.options.serviceUrl+"/address",{key:this._key,location:n,limit:5,outFormat:"json"},function(n){var o=[],u,e,f;if(n.results&&n.results[0].locations)for(f=n.results[0].locations.length-1;f>=0;f--)u=n.results[0].locations[f],e=r.latLng(u.latLng),o[f]={name:this._formatName(u.street,u.adminArea4,u.adminArea3,u.adminArea1),bbox:r.latLngBounds(e,e),center:e};t.call(i,o)},this)},reverse:function(n,t,i,f){u.jsonp(this.options.serviceUrl+"/reverse",{key:this._key,location:n.lat+","+n.lng,outputFormat:"json"},function(n){var o=[],t,e,u;if(n.results&&n.results[0].locations)for(u=n.results[0].locations.length-1;u>=0;u--)t=n.results[0].locations[u],e=r.latLng(t.latLng),o[u]={name:this._formatName(t.street,t.adminArea4,t.adminArea3,t.adminArea1),bbox:r.latLngBounds(e,e),center:e};i.call(f,o)},this)}}),factory:function(n,t){return new r.Control.Geocoder.MapQuest(n,t)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],8:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{serviceUrl:"https://search.mapzen.com/v1",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(n,t){r.Util.setOptions(this,t);this._apiKey=n;this._lastSuggest=0},geocode:function(n,t,i){var f=this;u.getJSON(this.options.serviceUrl+"/search",r.extend({api_key:this._apiKey,text:n},this.options.geocodingQueryParams),function(n){t.call(i,f._parseResults(n,"bbox"))})},suggest:function(n,t,i){var f=this;u.getJSON(this.options.serviceUrl+"/autocomplete",r.extend({api_key:this._apiKey,text:n},this.options.geocodingQueryParams),r.bind(function(n){n.geocoding.timestamp>this._lastSuggest&&(this._lastSuggest=n.geocoding.timestamp,t.call(i,f._parseResults(n,"bbox")))},this))},reverse:function(n,t,i,f){var e=this;u.getJSON(this.options.serviceUrl+"/reverse",r.extend({api_key:this._apiKey,"point.lat":n.lat,"point.lon":n.lng},this.options.reverseQueryParams),function(n){i.call(f,e._parseResults(n,"bounds"))})},_parseResults:function(n,t){var i=[];return r.geoJson(n,{pointToLayer:function(n,t){return r.circleMarker(t)},onEachFeature:function(n,u){var f={},o,e;u.getBounds?(o=u.getBounds(),e=o.getCenter()):(e=u.getLatLng(),o=r.latLngBounds(e,e));f.name=u.feature.properties.label;f.center=e;f[t]=o;f.properties=u.feature.properties;i.push(f)}}),i}}),factory:function(n,t){return new r.Control.Geocoder.Mapzen(n,t)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],9:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{serviceUrl:"https://nominatim.openstreetmap.org/",geocodingQueryParams:{},reverseQueryParams:{},htmlTemplate:function(n){var t=n.address,i=[];return(t.road||t.building)&&i.push("{building} {road} {house_number}"),(t.city||t.town||t.village||t.hamlet)&&i.push('<span class="'+(i.length>0?"leaflet-control-geocoder-address-detail":"")+'">{postcode} {city} {town} {village} {hamlet}<\/span>'),(t.state||t.country)&&i.push('<span class="'+(i.length>0?"leaflet-control-geocoder-address-context":"")+'">{state} {country}<\/span>'),u.template(i.join("<br/>"),t,!0)}},initialize:function(n){r.Util.setOptions(this,n)},geocode:function(n,t,i){u.jsonp(this.options.serviceUrl+"search",r.extend({q:n,limit:5,format:"json",addressdetails:1},this.options.geocodingQueryParams),function(n){for(var f,e,o=[],u=n.length-1;u>=0;u--){for(f=n[u].boundingbox,e=0;e<4;e++)f[e]=parseFloat(f[e]);o[u]={icon:n[u].icon,name:n[u].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(n[u]):undefined,bbox:r.latLngBounds([f[0],f[2]],[f[1],f[3]]),center:r.latLng(n[u].lat,n[u].lon),properties:n[u]}}t.call(i,o)},this,"json_callback")},reverse:function(n,t,i,f){u.jsonp(this.options.serviceUrl+"reverse",r.extend({lat:n.lat,lon:n.lng,zoom:Math.round(Math.log(t/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),function(n){var u=[],t;n&&n.lat&&n.lon&&(t=r.latLng(n.lat,n.lon),u.push({name:n.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(n):undefined,center:t,bounds:r.latLngBounds(t,t),properties:n}));i.call(f,u)},this,"json_callback")}}),factory:function(n){return new r.Control.Geocoder.Nominatim(n)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],10:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{serviceUrl:"https://photon.komoot.de/api/",reverseUrl:"https://photon.komoot.de/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},initialize:function(n){r.setOptions(this,n)},geocode:function(n,t,i){var f=r.extend({q:n},this.options.geocodingQueryParams);u.getJSON(this.options.serviceUrl,f,r.bind(function(n){t.call(i,this._decodeFeatures(n))},this))},suggest:function(n,t,i){return this.geocode(n,t,i)},reverse:function(n,t,i,f){var e=r.extend({lat:n.lat,lon:n.lng},this.options.geocodingQueryParams);u.getJSON(this.options.reverseUrl,e,r.bind(function(n){i.call(f,this._decodeFeatures(n))},this))},_decodeFeatures:function(n){var o=[],u,i,e,f,t,s;if(n&&n.features)for(u=0;u<n.features.length;u++)i=n.features[u],e=i.geometry.coordinates,f=r.latLng(e[1],e[0]),t=i.properties.extent,s=t?r.latLngBounds([t[1],t[0]],[t[3],t[2]]):r.latLngBounds(f,f),o.push({name:this._deocodeFeatureName(i),center:f,bbox:s,properties:i.properties});return o},_deocodeFeatureName:function(n){for(var i,t=0;!i&&t<this.options.nameProperties.length;t++)i=n.properties[this.options.nameProperties[t]];return i}}),factory:function(n){return new r.Control.Geocoder.Photon(n)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],11:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("../util");t.exports={"class":r.Class.extend({options:{serviceUrl:"https://api.what3words.com/v2/"},initialize:function(n){this._accessToken=n},geocode:function(n,t,i){u.getJSON(this.options.serviceUrl+"forward",{key:this._accessToken,addr:n.split(/\s+/).join(".")},function(n){var f=[],u,e;n.hasOwnProperty("geometry")&&(u=r.latLng(n.geometry.lat,n.geometry.lng),e=r.latLngBounds(u,u),f[0]={name:n.words,bbox:e,center:u});t.call(i,f)})},suggest:function(n,t,i){return this.geocode(n,t,i)},reverse:function(n,t,i,f){u.getJSON(this.options.serviceUrl+"reverse",{key:this._accessToken,coords:[n.lat,n.lng].join(",")},function(n){var u=[],t,e;n.status.status==200&&(t=r.latLng(n.geometry.lat,n.geometry.lng),e=r.latLngBounds(t,t),u[0]={name:n.words,bbox:e,center:t});i.call(f,u)})}}),factory:function(n){return new r.Control.Geocoder.What3Words(n)}}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":13}],12:[function(n,t){(function(i){var r=typeof window!="undefined"?window.L:typeof i!="undefined"?i.L:null,u=n("./control"),f=n("./geocoders/nominatim"),e=n("./geocoders/bing"),o=n("./geocoders/mapquest"),s=n("./geocoders/mapbox"),h=n("./geocoders/what3words"),c=n("./geocoders/google"),l=n("./geocoders/photon"),a=n("./geocoders/mapzen"),v=n("./geocoders/arcgis"),y=n("./geocoders/here");t.exports=r.Util.extend(u["class"],{Nominatim:f["class"],nominatim:f.factory,Bing:e["class"],bing:e.factory,MapQuest:o["class"],mapQuest:o.factory,Mapbox:s["class"],mapbox:s.factory,What3Words:h["class"],what3words:h.factory,Google:c["class"],google:c.factory,Photon:l["class"],photon:l.factory,Mapzen:a["class"],mapzen:a.factory,ArcGis:v["class"],arcgis:v.factory,HERE:y["class"],here:y.factory});r.Util.extend(r.Control,{Geocoder:t.exports,geocoder:u.factory})}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./control":1,"./geocoders/arcgis":2,"./geocoders/bing":3,"./geocoders/google":4,"./geocoders/here":5,"./geocoders/mapbox":6,"./geocoders/mapquest":7,"./geocoders/mapzen":8,"./geocoders/nominatim":9,"./geocoders/photon":10,"./geocoders/what3words":11}],13:[function(n,t){(function(n){var i=typeof window!="undefined"?window.L:typeof n!="undefined"?n.L:null,u=0,r=function(){function r(n){return i[n]}var n=/[&<>"'`]/g,t=/[&<>"'`]/,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return function(i){return i==null?"":i?(i=""+i,!t.test(i))?i:i.replace(n,r):i+""}}();t.exports={jsonp:function(n,t,r,f,e){var s="_l_geocoder_"+u++,o;t[e||"callback"]=s;window[s]=i.Util.bind(r,f);o=document.createElement("script");o.type="text/javascript";o.src=n+i.Util.getParamString(t);o.id=s;document.getElementsByTagName("head")[0].appendChild(o)},getJSON:function(n,t,r){var u=new XMLHttpRequest;u.onreadystatechange=function(){if(u.readyState===4){if(u.status!==200&&u.status!==304){r("");return}r(JSON.parse(u.response))}};u.open("GET",n+i.Util.getParamString(t),!0);u.setRequestHeader("Accept","application/json");u.send(null)},template:function(n,t){return n.replace(/\{ *([\w_]+) *\}/g,function(n,i){var u=t[i];return u===undefined?u="":typeof u=="function"&&(u=u(t)),r(u)})},htmlEscape:r}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[12])(12)});